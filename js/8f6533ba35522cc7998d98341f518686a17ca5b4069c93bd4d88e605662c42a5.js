!function(){"use strict";!function(){const e=document.querySelectorAll("video");if(!e.length)return;(function(){if(document.querySelector("template#playPauseButton"))return;const e='\n<div class="playPauseButton">\n<svg class="playSvg" width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.248 4.212l11.05 6.574c.694.412.91 1.29.483 1.961-.121.19-.287.35-.483.467l-11.05 6.574c-.694.413-1.602.204-2.03-.467A1.39 1.39 0 0 1 6 18.574V5.426C6 4.638 6.66 4 7.475 4c.273 0 .54.073.773.212z" fill="currentColor"/></svg>\n<svg class="pauseSvg" style="display: none" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><rect x="7" y="5" width="3" height="14" rx="1.5" fill="currentColor"/><rect x="14" y="5" width="3" height="14" rx="1.5" fill="currentColor"/></svg>\n</div>\n'.trim(),n="\n  .playPauseButton {\n    cursor: pointer;\n    position: absolute;\n    top: calc(50% - 24px);\n    left: calc(50% - 24px);\n    width: 48px;\n    height: 48px;\n    border-radius: 100%;\n    background: rgba(17,23,29,.4);\n    transition: opacity 0.2s ease-out;\n    color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n".trim(),t=document.createElement("template");t.id="playPauseButton",t.innerHTML=e,document.body.appendChild(t);const o=document.createElement("style");o.innerHTML=n,document.body.appendChild(o)})(),function(){if(document.querySelector("template#seekBar"))return;const e='\n<div class="videoSeek">\n<div class="videoSeekBar">\n  <div class="videoSeekBarCurrent"></div>\n</div>\n<input class="videoSeekInput" type="range" min="0" max="100" step="any" value="0">\n</div>\n'.trim(),n="\n  .videoSeek {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    padding: 0;\n    box-sizing: border-box;\n    background: linear-gradient(0, rgba(17,23,29,.4) 0%, transparent 100%);\n    color: white;\n    transition: opacity 0.2s ease-out;\n    opacity: 0;\n  }\n\n  .videoSeekBar {\n    position: absolute;\n    top: calc(50% - 2px);\n    left: 22px;\n    right: 22px;\n    height: 4px;\n    background: rgba(255, 255, 255, 0.4);\n    border-radius: 4px;\n  }\n\n  .videoSeekBarCurrent {\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    background: white;\n    border-radius: 4px;\n  }\n\n  .videoSeekInput {\n    position: relative;\n    display: block;\n    box-sizing: border-box;\n    margin: 0;\n    width: 100%;\n    height: 100%;\n    padding: 16px 8px;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    appearance: none;\n    background: none;\n    direction: ltr;\n  }\n\n  .videoSeekInput:hover {\n    cursor: pointer;\n  }\n\n  .videoSeekInput:active {\n    cursor: grabbing;\n  }\n\n  /* chrome, safari */\n  .videoSeekInput::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    appearance: none;\n    box-sizing: border-box;\n    width: 40px;\n    height: 40px;\n    border: 14px solid transparent;\n    border-radius: 100%;\n    background-clip: content-box;\n    background-color: white;\n    filter: drop-shadow(0 0 1px black);\n    opacity: 1;\n  }\n\n  .videoSeekInput:active::-webkit-slider-thumb {\n    transform: scale(1.25);\n  }\n\n  /* firefox */\n  .videoSeekInput::-moz-focus-outer {\n    border: none;\n  }\n\n  .videoSeekInput::-moz-range-thumb {\n    -moz-appearance: none;\n    appearance: none;\n    box-sizing: border-box;\n    width: 40px;\n    height: 40px;\n    border: 14px solid transparent;\n    border-radius: 100%;\n    background-clip: content-box;\n    background-color: white;\n    filter: drop-shadow(0 0 1px black);\n    opacity: 1;\n  }\n\n  .videoSeekInput:active::-moz-range-thumb {\n    transform: scale(1.25);\n  }\n".trim(),t=document.createElement("template");t.id="seekBar",t.innerHTML=e,document.body.appendChild(t);const o=document.createElement("style");o.innerHTML=n,document.body.appendChild(o)}();const n=[],t=new IntersectionObserver((e=>{e.forEach((e=>{if(!e.isIntersecting)return;const n=e.target;t.unobserve(n),n.play()}))}));e.forEach((e=>{if(!e.controls)return;let o=e;for(;null!=o&&null!=o.parentElement&&(o=o.parentElement,"100%"!==o.style.width||"100%"!==o.style.height||"svg"===o.tagName.toLowerCase()););o.parentElement&&"section"===o.parentElement.tagName.toLowerCase()&&(o=o.parentElement);const r=function(e,n){"relative"!==e.style.position&&"absolute"!==e.style.position&&(e.style.position="relative");n.controls=!1;const{seekBar:t,updateDuration:o}=function(e){const n=document.querySelector("template#seekBar");if(null==n)throw new Error("template does not exist");const t=n.content.firstChild.cloneNode(!0);t.addEventListener("click",(e=>e.stopPropagation()));const o=t.querySelector("input");let r=0,i=100;const a=(e,n)=>{r=e,i=n,o.min=e.toString(),o.max=n.toString()};a(r,i),o.addEventListener("input",(n=>{const t=parseFloat(n.target.value);e.currentTime=t}));const s=t.querySelector(".videoSeekBarCurrent");return e.addEventListener("timeupdate",(()=>{o.value=e.currentTime.toString();const n=i-r,t=Math.min((e.currentTime-r)/n*100,100);s.style.width=`${t}%`})),{seekBar:t,updateDuration:a}}(n);e.appendChild(t);const{maybeResetVideoProgress:r}=function(e,n){const t=e.dataset.trimStartUs,o=e.dataset.trimEndUs,r=null!=t?parseFloat(t)/1e6:0;let i=null!=o?parseFloat(o)/1e6:void 0;e.addEventListener("timeupdate",(()=>{let n=e.currentTime;null!=i&&n>i?e.loop?n=r:e.pause():n<r&&(n=r),n!==e.currentTime&&(e.currentTime=n)}));const a=()=>{null==i&&(i=e.duration),n(r,i)};e.addEventListener("durationchange",a),e.addEventListener("loadedmetadata",a),a();return{maybeResetVideoProgress:()=>{null!=i&&e.currentTime>=i&&(e.currentTime=r)}}}(n,o),{playButton:i,playPause:a}=function(e,n){let t=!1;const o=async o=>{if(!t){t=!0,o.stopPropagation();try{e.paused?(n(),await e.play()):e.pause()}finally{t=!1}}},r=document.querySelector("template#playPauseButton");if(null==r)throw new Error("template does not exist");const i=r.content.firstChild.cloneNode(!0);return i.addEventListener("click",o),{playButton:i,playPause:o}}(n,r);e.appendChild(i);const s=i.querySelector(".pauseSvg"),l=i.querySelector(".playSvg"),d=()=>{i.style.opacity="0",s.style.display="block",l.style.display="none"},c=()=>{i.style.opacity="1",s.style.display="none",l.style.display="block"};n.addEventListener("play",d),n.addEventListener("pause",c),n.paused?c():d();const p=()=>{n.paused||(i.style.opacity="1"),t.style.opacity="1"},u=()=>{n.paused||(i.style.opacity="0"),t.style.opacity="0"};e.addEventListener("mouseenter",p),e.addEventListener("mouseover",p),e.addEventListener("mousemove",p),e.addEventListener("mouseleave",u),e.addEventListener("mouseout",u),e.addEventListener("click",a);return()=>{const n=e.clientWidth>100&&e.clientHeight>100;i.style.visibility=n?"visible":"hidden",t.style.visibility=n?"visible":"hidden"}}(o,e);n.push(r),e.autoplay&&(e.autoplay=!1,e.paused||e.pause(),t.observe(e))})),window.addEventListener("resize",(()=>{n.forEach((e=>e()))}))}()}();
